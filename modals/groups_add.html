<div class="modal-header">
    <h5 class="modal-title"><span class="i18n" data-i18n="NEW_GROUP">NEW_GROUP</span></h5>
</div>
<div class="modal-body">
    <form id="groups_add_group_form">
        <div class="form-group">
            <label for="groups_add_username"><span class="i18n" data-i18n="GROUP_NAME">GROUP_NAME</span></label><span class="text-danger">&nbsp;*</span>
            <input type="text" class="form-control" id="groups_add_group_name" name="groups_add_group_name">
        </div>

        <div class="form-group">
            <label for="groups_add_group_description"><span class="i18n" data-i18n="DESCRIPTION">DESCRIPTION</span></label>
            <textarea class="form-control" placeholder="" id="groups_add_group_description"></textarea>
        </div>

    </form>
</div>
<div class="modal-footer">
    <button type="submit" class="btn btn-secondary" data-dismiss="modal"><span class="i18n" data-i18n="CLOSE">CLOSE</span></button>
    <button type="button" class="btn btn-primary" id="groups_add_save"><span class="i18n" data-i18n="SAVE">SAVE</span></button>
</div>

<script>

    (() => {

        INDEX.i18n.apply();

        const validator = $("#groups_add_group_form").validate({
            rules: {
                groups_add_group_name: {
                    required: true
                }
            },
            messages: {
                groups_add_group_name: {
                    required: INDEX.i18n.label("THIS_FIELD_IS_REQUIRED")

                }
            }
        });
        
        $("#groups_add_save").on("click", (event) => {

            if(validator.form()) {

                const name = $("#groups_add_group_name").val();
                const desc = $("#groups_add_group_description").val();

                ZOMBI.server(
                    ["sys_groups", "groups_add", [name, desc]],

                    (error, response) => {

                        if(error) {

                            INDEX.flash(INDEX.i18n.label("SERVER_ERROR"));

                        } else {

                            if(response.error) {

                                INDEX.flash(response.message);
            
                            } else {

                                INDEX.close_modal();

                                INDEX.datatables.refresh("groups_table");
            
                            }
                        
                        }
                    
                    }

                );

            }

        });

    })();

</script>

