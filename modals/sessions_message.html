<div class="modal-header">
        <h5 class="modal-title"><span class="i18n" data-i18n="MESSAGE_TO">MESSAGE_TO</span> <span id="sessions_message_title_id"></span></h5>
    </div>
    <div class="modal-body">
        <form id="sessions_message_group_form">
            <div class="form-group">
                <label for="sessions_message_text"><span class="i18n" data-i18n="MESSAGE">MESSAGE</span></label>
                <textarea class="form-control" placeholder="" id="sessions_message_group_description"></textarea>
            </div>
    
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="sessions_message_send"><span class="i18n" data-i18n="SEND">SEND</span></button>
    </div>
    
    <script>
    
        (() => {
    
            INDEX.i18n.apply();

            const token = INDEX.data.get("sessions_message_token");
            const uname = INDEX.data.get("sessions_message_uname");

            $("#sessions_message_title_id").html(uname);
            
            $("#sessions_message_send").on("click", (event) => {

                const message = $("#sessions_message_group_description").val();
    
                ZOMBI.server(
                    ["sys_sessions", "send_message_to_session", [token, message]],

                    (error, response) => {

                        if(error) {

                            INDEX.flash(INDEX.i18n.label("SERVER_ERROR"));

                        } else {

                            if(response.error) {

                                INDEX.flash(response.message);
            
                            } else {

                                INDEX.close_modal();

                            }
                        
                        }
                    
                    }

                );
    
            });

        })();
    
    </script>
    
    